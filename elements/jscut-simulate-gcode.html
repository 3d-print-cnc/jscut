<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="jscut-simulate-gcode">
    <script src="../lib/jquery-2.1.1.min.js"></script>
    <script src="../lib/bootstrap-3.1.1/js/bootstrap.min.js"></script>
    <script src="../lib/gl-matrix-2.2.0-min.js"></script>
    <script src="../lib/webgl-utils.js"></script>
    <script src="../lib/bootstrap-slider.min.js"></script>
    <script src="../js/parseGcode.js"></script>
    <script src="../js/RenderPath.js"></script>

    <template>
        <div>
            <link href="../lib/bootstrap-3.1.1/css/bootstrap.min.css" rel="stylesheet">
            <link href="../lib/bootstrap-slider.min.css" rel="stylesheet">

            <div class="container-fluid">
                <div class="row clearfix">
                    <div class="col-md-12 column">
                        <div class="jumbotron">
                            <canvas id="renderPathCanvas" style="border: none;" width="512" height="512"></canvas>
                            <br />
                            <br />
                            <input id="timeSlider" type="text" data-slider-min="0" data-slider-max="1000" data-slider-step="1" data-slider-value="1000" />
                            <h2>
                                GCODE simulation demo
                            </h2>
                            <ul>
                                <li>Use mouse to rotate view</li>
                                <li>Use slider control to set simulation time</li>
                                <li><a href="jscut.html">Launch jscut</a> to generate and simulate your own GCODE!</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <script>
        Polymer('jscut-simulate-gcode', {
            ready: function () {
                var self = this;
                self.renderPath = startRenderPath({}, self.$.renderPathCanvas, $(self.$.timeSlider), function (renderPath) {
                    $.get("logo-gcode.txt", function (gcode) {
                        renderPath.fillPathBuffer(parseGcode({}, gcode), 0, .125, 1);
                    });
                });
            }
        });
    </script>
</polymer-element>
